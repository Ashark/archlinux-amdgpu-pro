# Author: Janusz Lewandowski <lew21@xtreeme.org>
# Maintainer: David McFarland <corngood@gmail.com>
# Autogenerated from AMD's Packages file

pkgbase=amdgpu-pro-installer
pkgname=(lib32-amdgpu-pro amdgpu-pro amdgpu-pro-dkms amdgpu-pro-lib32 lib32-clinfo-amdgpu-pro clinfo-amdgpu-pro lib32-gst-omx-amdgpu-pro gst-omx-amdgpu-pro lib32-libdrm-amdgpu-pro-amdgpu1 libdrm-amdgpu-pro-amdgpu1 libdrm-amdgpu-pro-dev lib32-libdrm-amdgpu-pro-dev libdrm-amdgpu-pro-radeon1 lib32-libdrm-amdgpu-pro-radeon1 libdrm-amdgpu-pro-utils lib32-libdrm-amdgpu-pro-utils libdrm2-amdgpu-pro lib32-libdrm2-amdgpu-pro libegl1-amdgpu-pro lib32-libegl1-amdgpu-pro lib32-libgbm1-amdgpu-pro libgbm1-amdgpu-pro libgbm1-amdgpu-pro-base libgbm1-amdgpu-pro-dev lib32-libgbm1-amdgpu-pro-dev libgl1-amdgpu-pro-appprofiles libgl1-amdgpu-pro-dri lib32-libgl1-amdgpu-pro-dri libgl1-amdgpu-pro-ext lib32-libgl1-amdgpu-pro-ext lib32-libgl1-amdgpu-pro-glx libgl1-amdgpu-pro-glx lib32-libglamor-amdgpu-pro-dev libglamor-amdgpu-pro-dev lib32-libgles2-amdgpu-pro libgles2-amdgpu-pro libopencl1-amdgpu-pro lib32-libopencl1-amdgpu-pro lib32-libvdpau-amdgpu-pro libvdpau-amdgpu-pro lib32-mesa-amdgpu-pro-omx-drivers mesa-amdgpu-pro-omx-drivers lib32-opencl-amdgpu-pro-icd opencl-amdgpu-pro-icd vulkan-amdgpu-pro lib32-vulkan-amdgpu-pro lib32-xserver-xorg-video-amdgpu-pro xserver-xorg-video-amdgpu-pro lib32-xserver-xorg-video-glamoregl-amdgpu-pro xserver-xorg-video-glamoregl-amdgpu-pro lib32-xserver-xorg-video-modesetting-amdgpu-pro xserver-xorg-video-modesetting-amdgpu-pro)
if [ "$ALL_PACKAGES" = "true" ]; then
	pkgname+=()
fi
pkgver=16.50.362463
pkgrel=1
arch=('x86_64')
url='http://www.amd.com'
license=('custom:AMD')
makedepends=('wget')

DLAGENTS='https::/usr/bin/wget --referer https://support.amd.com/en-us/kb-articles/Pages/AMD-Radeon-GPU-PRO-Linux-Beta-Driver%E2%80%93Release-Notes.aspx -N %u'

source=(https://www2.ati.com/drivers/linux/ubuntu/amdgpu-pro-16.50-362463.tar.xz
	0001-Fix-kernel-module-install-location.patch
	0002-Add-Gentoo-as-build-option.patch
	0003-Remove-extra-parameter-from-ttm_bo_reserve-for-4.7.0.patch
	0004-Change-seq_printf-format-for-64-bit-context.patch
	0005-Fix-vblank-calls.patch
	0006-Fix-crtc_gamma-functions-for-4.8.0.patch
	0007-Fix-drm_atomic_helper_swap_state-for-4.8.0.patch
	0008-Add-extra-flag-to-ttm_bo_move_ttm-for-4.8.0-rc2.patch
	0009-Remove-dependency-on-System.map.patch
	0010-disable-dal-by-default.patch
	0011-kcl-fixes-for-16.50-linux-4.8.patch
	0012-use-kernel-fence_array-in-4.8.patch
)
sha256sums=(a959013fd641a07107af65d9dd54a019ddcc4a14f467d5d620fabc3497aa88f2
	6ee0d8f36ecf1c0d65aecc28403528fcacfcef1ca95b39f8db0bde131416f1cb
	82bb5e6e76ea47b132c9a6910510fe613243b61e122d49ae9df47fcbc2ef655d
	0a64aea68b467d639e91264510134d4c6bede1093a49d467028302ac2d87fb8b
	21c78811107d8ee59f3566d21ed4a7ccfd622f4e07350fca7ed662392ab07190
	2ee61d8790b95d98f8ded616effb6fb5f4c4e80d2a59957773d0b69c7227e2f5
	ccdab6ab16443ed0031f6175034de7dff0ba636e81a465f8a052f25ee3649cf9
	b49a94f539c538ad4aadb594bd8f2ad8f5629d913540b99b57272cd385f0b920
	8cf33d20555435f29c3a3f019d767726ac9add23642a0f1a5c7af759f4699ed1
	b3baba639ece85b07a7870e8f71ed35c15de006d0cd46610a67ce8569c1a9b46
	4c12f81c3c2a5b6ecd17ec911a78d11fcfc81424619fb207f92d68551c073f14
	787868375f2f5b38befba10d7a6fe38fa6d0f99f5e5a4e0f2b372eb6df04714e
	1cc1ca0f72b9a424d606908667409211599496e9a36ae98e077650656ee3ea91
)

package_lib32-amdgpu-pro () {
	pkgdesc="Meta package to install amdgpu Pro components."
	depends=('lib32-amdgpu-pro-dkms=16.50.362463-1' 'lib32-libdrm-amdgpu-pro-utils=16.50.362463-1' 'lib32-libgbm1-amdgpu-pro=16.50.362463-1' 'lib32-libgl1-amdgpu-pro-appprofiles=16.50.362463-1' 'lib32-libgl1-amdgpu-pro-glx=16.50.362463-1' 'lib32-libgl1-amdgpu-pro-ext=16.50.362463-1' 'lib32-libgl1-amdgpu-pro-dri=16.50.362463-1' 'lib32-libgles2-amdgpu-pro=16.50.362463-1' 'lib32-vulkan-amdgpu-pro=16.50.362463-1' 'lib32-libvdpau-amdgpu-pro=16.50.362463-1' 'lib32-libopencl1-amdgpu-pro=16.50.362463-1' 'lib32-clinfo-amdgpu-pro=16.50.362463-1' 'lib32-opencl-amdgpu-pro-icd=16.50.362463-1' 'lib32-xserver-xorg-video-glamoregl-amdgpu-pro=16.50.362463-1' 'lib32-xserver-xorg-video-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/amdgpu-pro_16.50-362463_i386
	mkdir "${srcdir}"/amdgpu-pro_16.50-362463_i386
	cd "${srcdir}"/amdgpu-pro_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./amdgpu-pro_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_amdgpu-pro () {
	pkgdesc="Meta package to install amdgpu Pro components."
	depends=('amdgpu-pro-dkms=16.50.362463-1' 'libdrm-amdgpu-pro-utils=16.50.362463-1' 'libgbm1-amdgpu-pro=16.50.362463-1' 'libgl1-amdgpu-pro-appprofiles=16.50.362463-1' 'libgl1-amdgpu-pro-glx=16.50.362463-1' 'libgl1-amdgpu-pro-ext=16.50.362463-1' 'libgl1-amdgpu-pro-dri=16.50.362463-1' 'libgles2-amdgpu-pro=16.50.362463-1' 'vulkan-amdgpu-pro=16.50.362463-1' 'libvdpau-amdgpu-pro=16.50.362463-1' 'libopencl1-amdgpu-pro=16.50.362463-1' 'clinfo-amdgpu-pro=16.50.362463-1' 'opencl-amdgpu-pro-icd=16.50.362463-1' 'xserver-xorg-video-glamoregl-amdgpu-pro=16.50.362463-1' 'xserver-xorg-video-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/amdgpu-pro_16.50-362463_amd64
	mkdir "${srcdir}"/amdgpu-pro_16.50-362463_amd64
	cd "${srcdir}"/amdgpu-pro_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./amdgpu-pro_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_amdgpu-pro-dkms () {
	pkgdesc="amdgpu-pro driver in DKMS format."
	depends=('dkms>=1.95')
	arch=('any')

	rm -Rf "${srcdir}"/amdgpu-pro-dkms_16.50-362463_all
	mkdir "${srcdir}"/amdgpu-pro-dkms_16.50-362463_all
	cd "${srcdir}"/amdgpu-pro-dkms_16.50-362463_all
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./amdgpu-pro-dkms_16.50-362463_all.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
	(cd ${pkgdir}/usr/src/amdgpu-pro-16.50-362463;
		echo applying 0001-Fix-kernel-module-install-location.patch 
		patch -p1 -i "${srcdir}/0001-Fix-kernel-module-install-location.patch";
		echo applying 0002-Add-Gentoo-as-build-option.patch
		patch -p1 -i "${srcdir}/0002-Add-Gentoo-as-build-option.patch";
		echo applying 0003-Remove-extra-parameter-from-ttm_bo_reserve-for-4.7.0.patch
		patch -p1 -i "${srcdir}/0003-Remove-extra-parameter-from-ttm_bo_reserve-for-4.7.0.patch";
		echo applying 0004-Change-seq_printf-format-for-64-bit-context.patch
		patch -p1 -i "${srcdir}/0004-Change-seq_printf-format-for-64-bit-context.patch";
		echo applying 0005-Fix-vblank-calls.patch
		patch -p1 -i "${srcdir}/0005-Fix-vblank-calls.patch";
		echo applying 0006-Fix-crtc_gamma-functions-for-4.8.0.patch
		patch -p1 -i "${srcdir}/0006-Fix-crtc_gamma-functions-for-4.8.0.patch";
		echo applying 0007-Fix-drm_atomic_helper_swap_state-for-4.8.0.patch
		patch -p1 -i "${srcdir}/0007-Fix-drm_atomic_helper_swap_state-for-4.8.0.patch";
		echo applying 0008-Add-extra-flag-to-ttm_bo_move_ttm-for-4.8.0-rc2.patch
		patch -p1 -i "${srcdir}/0008-Add-extra-flag-to-ttm_bo_move_ttm-for-4.8.0-rc2.patch";
		echo applying 0009-Remove-dependency-on-System.map.patch
		patch -p1 -i "${srcdir}/0009-Remove-dependency-on-System.map.patch";
		echo applying 0010-disable-dal-by-default.patch
		patch -p1 -i "${srcdir}/0010-disable-dal-by-default.patch";
		echo applying 0011-kcl-fixes-for-16.50-linux-4.8.patch 
		patch -p1 -i "${srcdir}/0011-kcl-fixes-for-16.50-linux-4.8.patch";
		echo applying 0012-use-kernel-fence_array-in-4.8.patch
		patch -p1 -i "${srcdir}/0012-use-kernel-fence_array-in-4.8.patch")

}


package_amdgpu-pro-lib32 () {
	pkgdesc="Meta package to support i386 runtime on amd64 architecture"
	depends=('libdrm-amdgpu-pro-amdgpu1:i386' 'libgbm1-amdgpu-pro:i386' 'libgl1-amdgpu-pro-glx:i386' 'libgl1-amdgpu-pro-dri:i386' 'libgles2-amdgpu-pro:i386' 'vulkan-amdgpu-pro:i386' 'libvdpau-amdgpu-pro:i386' 'libopencl1-amdgpu-pro:i386' 'opencl-amdgpu-pro-icd:i386')
	arch=('x86_64')

	rm -Rf "${srcdir}"/amdgpu-pro-lib32_16.50-362463_amd64
	mkdir "${srcdir}"/amdgpu-pro-lib32_16.50-362463_amd64
	cd "${srcdir}"/amdgpu-pro-lib32_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./amdgpu-pro-lib32_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-clinfo-amdgpu-pro () {
	pkgdesc="AMD OpenCL info utility"
	depends=('lib32-libopencl1-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/clinfo-amdgpu-pro_16.50-362463_i386
	mkdir "${srcdir}"/clinfo-amdgpu-pro_16.50-362463_i386
	cd "${srcdir}"/clinfo-amdgpu-pro_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./clinfo-amdgpu-pro_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_clinfo-amdgpu-pro () {
	pkgdesc="AMD OpenCL info utility"
	depends=('libopencl1-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/clinfo-amdgpu-pro_16.50-362463_amd64
	mkdir "${srcdir}"/clinfo-amdgpu-pro_16.50-362463_amd64
	cd "${srcdir}"/clinfo-amdgpu-pro_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./clinfo-amdgpu-pro_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-gst-omx-amdgpu-pro () {
	pkgdesc="GStreamer OpenMAX plugins"
	depends=('lib32-libglib2.0-0>=2.37.3' 'lib32-libgstreamer-plugins-base1.0-0>=1.6.0' 'lib32-libgstreamer1.0-0>=1.0.0' 'lib32-libomxil-bellagio0')
	arch=('x86_64')

	rm -Rf "${srcdir}"/gst-omx-amdgpu-pro_1.0.0.1-362463_i386
	mkdir "${srcdir}"/gst-omx-amdgpu-pro_1.0.0.1-362463_i386
	cd "${srcdir}"/gst-omx-amdgpu-pro_1.0.0.1-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./gst-omx-amdgpu-pro_1.0.0.1-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_gst-omx-amdgpu-pro () {
	pkgdesc="GStreamer OpenMAX plugins"
	depends=('libglib2.0-0>=2.37.3' 'libgstreamer-plugins-base1.0-0>=1.6.0' 'libgstreamer1.0-0>=1.0.0' 'libomxil-bellagio0')
	arch=('x86_64')

	rm -Rf "${srcdir}"/gst-omx-amdgpu-pro_1.0.0.1-362463_amd64
	mkdir "${srcdir}"/gst-omx-amdgpu-pro_1.0.0.1-362463_amd64
	cd "${srcdir}"/gst-omx-amdgpu-pro_1.0.0.1-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./gst-omx-amdgpu-pro_1.0.0.1-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-libdrm-amdgpu-pro-amdgpu1 () {
	pkgdesc="Userspace interface to amdgpu-specific kernel DRM services -- runtime"
	depends=('lib32-libdrm2-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm-amdgpu-pro-amdgpu1_1:2.4.70-362463_i386
	mkdir "${srcdir}"/libdrm-amdgpu-pro-amdgpu1_1:2.4.70-362463_i386
	cd "${srcdir}"/libdrm-amdgpu-pro-amdgpu1_1:2.4.70-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm-amdgpu-pro-amdgpu1_2.4.70-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libdrm-amdgpu-pro-amdgpu1 () {
	pkgdesc="Userspace interface to amdgpu-specific kernel DRM services -- runtime"
	depends=('libdrm2-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm-amdgpu-pro-amdgpu1_1:2.4.70-362463_amd64
	mkdir "${srcdir}"/libdrm-amdgpu-pro-amdgpu1_1:2.4.70-362463_amd64
	cd "${srcdir}"/libdrm-amdgpu-pro-amdgpu1_1:2.4.70-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm-amdgpu-pro-amdgpu1_2.4.70-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_libdrm-amdgpu-pro-dev () {
	pkgdesc="Userspace interface to kernel DRM services -- development files"
	depends=('libdrm2-amdgpu-pro=16.50.362463-1' 'libdrm-amdgpu-pro-amdgpu1=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm-amdgpu-pro-dev_1:2.4.70-362463_amd64
	mkdir "${srcdir}"/libdrm-amdgpu-pro-dev_1:2.4.70-362463_amd64
	cd "${srcdir}"/libdrm-amdgpu-pro-dev_1:2.4.70-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm-amdgpu-pro-dev_2.4.70-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-libdrm-amdgpu-pro-dev () {
	pkgdesc="Userspace interface to kernel DRM services -- development files"
	depends=('lib32-libdrm2-amdgpu-pro=16.50.362463-1' 'lib32-libdrm-amdgpu-pro-amdgpu1=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm-amdgpu-pro-dev_1:2.4.70-362463_i386
	mkdir "${srcdir}"/libdrm-amdgpu-pro-dev_1:2.4.70-362463_i386
	cd "${srcdir}"/libdrm-amdgpu-pro-dev_1:2.4.70-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm-amdgpu-pro-dev_2.4.70-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libdrm-amdgpu-pro-radeon1 () {
	pkgdesc="Userspace interface to radeon-specific kernel DRM services -- runtime"
	depends=('libdrm2-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm-amdgpu-pro-radeon1_1:2.4.70-362463_amd64
	mkdir "${srcdir}"/libdrm-amdgpu-pro-radeon1_1:2.4.70-362463_amd64
	cd "${srcdir}"/libdrm-amdgpu-pro-radeon1_1:2.4.70-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm-amdgpu-pro-radeon1_2.4.70-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-libdrm-amdgpu-pro-radeon1 () {
	pkgdesc="Userspace interface to radeon-specific kernel DRM services -- runtime"
	depends=('lib32-libdrm2-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm-amdgpu-pro-radeon1_1:2.4.70-362463_i386
	mkdir "${srcdir}"/libdrm-amdgpu-pro-radeon1_1:2.4.70-362463_i386
	cd "${srcdir}"/libdrm-amdgpu-pro-radeon1_1:2.4.70-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm-amdgpu-pro-radeon1_2.4.70-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libdrm-amdgpu-pro-utils () {
	pkgdesc="Utility programs for the kernel DRM interface."
	depends=('libdrm2-amdgpu-pro=16.50.362463-1' 'libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'cunit')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm-amdgpu-pro-utils_1:2.4.70-362463_amd64
	mkdir "${srcdir}"/libdrm-amdgpu-pro-utils_1:2.4.70-362463_amd64
	cd "${srcdir}"/libdrm-amdgpu-pro-utils_1:2.4.70-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm-amdgpu-pro-utils_2.4.70-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-libdrm-amdgpu-pro-utils () {
	pkgdesc="Utility programs for the kernel DRM interface."
	depends=('lib32-libdrm2-amdgpu-pro=16.50.362463-1' 'lib32-libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'lib32-cunit')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm-amdgpu-pro-utils_1:2.4.70-362463_i386
	mkdir "${srcdir}"/libdrm-amdgpu-pro-utils_1:2.4.70-362463_i386
	cd "${srcdir}"/libdrm-amdgpu-pro-utils_1:2.4.70-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm-amdgpu-pro-utils_2.4.70-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libdrm2-amdgpu-pro () {
	pkgdesc="Userspace interface to kernel DRM services -- runtime"
	depends=()
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm2-amdgpu-pro_1:2.4.70-362463_amd64
	mkdir "${srcdir}"/libdrm2-amdgpu-pro_1:2.4.70-362463_amd64
	cd "${srcdir}"/libdrm2-amdgpu-pro_1:2.4.70-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm2-amdgpu-pro_2.4.70-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi

	mv ${pkgdir}/lib ${pkgdir}/usr/

}


package_lib32-libdrm2-amdgpu-pro () {
	pkgdesc="Userspace interface to kernel DRM services -- runtime"
	depends=()
	arch=('x86_64')

	rm -Rf "${srcdir}"/libdrm2-amdgpu-pro_1:2.4.70-362463_i386
	mkdir "${srcdir}"/libdrm2-amdgpu-pro_1:2.4.70-362463_i386
	cd "${srcdir}"/libdrm2-amdgpu-pro_1:2.4.70-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libdrm2-amdgpu-pro_2.4.70-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libegl1-amdgpu-pro () {
	pkgdesc="implementation of the EGL API -- runtime"
	depends=()
	arch=('x86_64')

	rm -Rf "${srcdir}"/libegl1-amdgpu-pro_16.50-362463_amd64
	mkdir "${srcdir}"/libegl1-amdgpu-pro_16.50-362463_amd64
	cd "${srcdir}"/libegl1-amdgpu-pro_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libegl1-amdgpu-pro_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-libegl1-amdgpu-pro () {
	pkgdesc="implementation of the EGL API -- runtime"
	depends=()
	arch=('x86_64')

	rm -Rf "${srcdir}"/libegl1-amdgpu-pro_16.50-362463_i386
	mkdir "${srcdir}"/libegl1-amdgpu-pro_16.50-362463_i386
	cd "${srcdir}"/libegl1-amdgpu-pro_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libegl1-amdgpu-pro_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_lib32-libgbm1-amdgpu-pro () {
	pkgdesc="Generic buffer management API -- runtime"
	depends=('lib32-libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'lib32-libgbm1-amdgpu-pro-base=16.50.362463-1' 'lib32-libdrm2-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgbm1-amdgpu-pro_16.50-362463_i386
	mkdir "${srcdir}"/libgbm1-amdgpu-pro_16.50-362463_i386
	cd "${srcdir}"/libgbm1-amdgpu-pro_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgbm1-amdgpu-pro_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libgbm1-amdgpu-pro () {
	pkgdesc="Generic buffer management API -- runtime"
	depends=('libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'libgbm1-amdgpu-pro-base=16.50.362463-1' 'libdrm2-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgbm1-amdgpu-pro_16.50-362463_amd64
	mkdir "${srcdir}"/libgbm1-amdgpu-pro_16.50-362463_amd64
	cd "${srcdir}"/libgbm1-amdgpu-pro_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgbm1-amdgpu-pro_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_libgbm1-amdgpu-pro-base () {
	pkgdesc="Generic buffer management API -- configuration files"
	depends=()
	arch=('any')

	rm -Rf "${srcdir}"/libgbm1-amdgpu-pro-base_16.50-362463_all
	mkdir "${srcdir}"/libgbm1-amdgpu-pro-base_16.50-362463_all
	cd "${srcdir}"/libgbm1-amdgpu-pro-base_16.50-362463_all
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgbm1-amdgpu-pro-base_16.50-362463_all.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_libgbm1-amdgpu-pro-dev () {
	pkgdesc="Generic buffer management API -- development files"
	depends=('libgbm1-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgbm1-amdgpu-pro-dev_16.50-362463_amd64
	mkdir "${srcdir}"/libgbm1-amdgpu-pro-dev_16.50-362463_amd64
	cd "${srcdir}"/libgbm1-amdgpu-pro-dev_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgbm1-amdgpu-pro-dev_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-libgbm1-amdgpu-pro-dev () {
	pkgdesc="Generic buffer management API -- development files"
	depends=('lib32-libgbm1-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgbm1-amdgpu-pro-dev_16.50-362463_i386
	mkdir "${srcdir}"/libgbm1-amdgpu-pro-dev_16.50-362463_i386
	cd "${srcdir}"/libgbm1-amdgpu-pro-dev_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgbm1-amdgpu-pro-dev_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libgl1-amdgpu-pro-appprofiles () {
	pkgdesc="AMD OpenGL profiles configuration"
	depends=()
	arch=('any')

	rm -Rf "${srcdir}"/libgl1-amdgpu-pro-appprofiles_16.50-362463_all
	mkdir "${srcdir}"/libgl1-amdgpu-pro-appprofiles_16.50-362463_all
	cd "${srcdir}"/libgl1-amdgpu-pro-appprofiles_16.50-362463_all
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgl1-amdgpu-pro-appprofiles_16.50-362463_all.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_libgl1-amdgpu-pro-dri () {
	pkgdesc="implementation of the OpenGL API -- DRI modules"
	depends=('libx11' 'libxext')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgl1-amdgpu-pro-dri_16.50-362463_amd64
	mkdir "${srcdir}"/libgl1-amdgpu-pro-dri_16.50-362463_amd64
	cd "${srcdir}"/libgl1-amdgpu-pro-dri_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgl1-amdgpu-pro-dri_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-libgl1-amdgpu-pro-dri () {
	pkgdesc="implementation of the OpenGL API -- DRI modules"
	depends=('lib32-libx11' 'lib32-libxext')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgl1-amdgpu-pro-dri_16.50-362463_i386
	mkdir "${srcdir}"/libgl1-amdgpu-pro-dri_16.50-362463_i386
	cd "${srcdir}"/libgl1-amdgpu-pro-dri_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgl1-amdgpu-pro-dri_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libgl1-amdgpu-pro-ext () {
	pkgdesc="xorg GLX exetnsion"
	depends=('libdrm2-amdgpu-pro=16.50.362463-1' 'libgl1-amdgpu-pro-glx=16.50.362463-1' 'libx11' 'libxcb' 'libxdamage>=1.1' 'libxext' 'libxfixes' 'libxxf86vm')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgl1-amdgpu-pro-ext_16.50-362463_amd64
	mkdir "${srcdir}"/libgl1-amdgpu-pro-ext_16.50-362463_amd64
	cd "${srcdir}"/libgl1-amdgpu-pro-ext_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgl1-amdgpu-pro-ext_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-libgl1-amdgpu-pro-ext () {
	pkgdesc="xorg GLX exetnsion"
	depends=('lib32-libdrm2-amdgpu-pro=16.50.362463-1' 'lib32-libgl1-amdgpu-pro-glx=16.50.362463-1' 'lib32-libx11' 'lib32-libxcb' 'lib32-libxdamage>=1.1' 'lib32-libxext' 'lib32-libxfixes' 'lib32-libxxf86vm')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgl1-amdgpu-pro-ext_16.50-362463_i386
	mkdir "${srcdir}"/libgl1-amdgpu-pro-ext_16.50-362463_i386
	cd "${srcdir}"/libgl1-amdgpu-pro-ext_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgl1-amdgpu-pro-ext_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_lib32-libgl1-amdgpu-pro-glx () {
	pkgdesc="implementation of the OpenGL API -- GLX runtime"
	depends=('lib32-libdrm2-amdgpu-pro=16.50.362463-1' 'lib32-libx11>=1.4.99.1' 'lib32-libxcb>=1.8' 'lib32-libxcb' 'lib32-libxcb>=1.9.2' 'lib32-libxdamage>=1.1' 'lib32-libxext' 'lib32-libxfixes' 'lib32-libxshmfence' 'lib32-libxxf86vm')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgl1-amdgpu-pro-glx_16.50-362463_i386
	mkdir "${srcdir}"/libgl1-amdgpu-pro-glx_16.50-362463_i386
	cd "${srcdir}"/libgl1-amdgpu-pro-glx_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgl1-amdgpu-pro-glx_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi

	provides=('lib32-libgl')
	conflicts=('lib32-libgl')

	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libgl1-amdgpu-pro-glx () {
	pkgdesc="implementation of the OpenGL API -- GLX runtime"
	depends=('libdrm2-amdgpu-pro=16.50.362463-1' 'libx11>=1.4.99.1' 'libxcb>=1.8' 'libxcb' 'libxcb>=1.9.2' 'libxdamage>=1.1' 'libxext' 'libxfixes' 'libxshmfence' 'libxxf86vm')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgl1-amdgpu-pro-glx_16.50-362463_amd64
	mkdir "${srcdir}"/libgl1-amdgpu-pro-glx_16.50-362463_amd64
	cd "${srcdir}"/libgl1-amdgpu-pro-glx_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgl1-amdgpu-pro-glx_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi

	provides=('libgl')
	conflicts=('libgl')

}


package_lib32-libglamor-amdgpu-pro-dev () {
	pkgdesc="shared graphics acceleration library based on OpenGL -- development files"
	depends=('lib32-xserver-xorg-video-glamoregl-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libglamor-amdgpu-pro-dev_1.18.3-362463_i386
	mkdir "${srcdir}"/libglamor-amdgpu-pro-dev_1.18.3-362463_i386
	cd "${srcdir}"/libglamor-amdgpu-pro-dev_1.18.3-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libglamor-amdgpu-pro-dev_1.18.3-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libglamor-amdgpu-pro-dev () {
	pkgdesc="shared graphics acceleration library based on OpenGL -- development files"
	depends=('xserver-xorg-video-glamoregl-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libglamor-amdgpu-pro-dev_1.18.3-362463_amd64
	mkdir "${srcdir}"/libglamor-amdgpu-pro-dev_1.18.3-362463_amd64
	cd "${srcdir}"/libglamor-amdgpu-pro-dev_1.18.3-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libglamor-amdgpu-pro-dev_1.18.3-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-libgles2-amdgpu-pro () {
	pkgdesc="implementation of the OpenGL|ES 2.x API -- runtime"
	depends=('lib32-libegl1-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgles2-amdgpu-pro_16.50-362463_i386
	mkdir "${srcdir}"/libgles2-amdgpu-pro_16.50-362463_i386
	cd "${srcdir}"/libgles2-amdgpu-pro_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgles2-amdgpu-pro_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libgles2-amdgpu-pro () {
	pkgdesc="implementation of the OpenGL|ES 2.x API -- runtime"
	depends=('libegl1-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libgles2-amdgpu-pro_16.50-362463_amd64
	mkdir "${srcdir}"/libgles2-amdgpu-pro_16.50-362463_amd64
	cd "${srcdir}"/libgles2-amdgpu-pro_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libgles2-amdgpu-pro_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_libopencl1-amdgpu-pro () {
	pkgdesc="AMD OpenCL ICD Loader library"
	depends=()
	arch=('x86_64')

	rm -Rf "${srcdir}"/libopencl1-amdgpu-pro_16.50-362463_amd64
	mkdir "${srcdir}"/libopencl1-amdgpu-pro_16.50-362463_amd64
	cd "${srcdir}"/libopencl1-amdgpu-pro_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libopencl1-amdgpu-pro_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi

	provides=(libcl)
	conflicts=(libcl)

}


package_lib32-libopencl1-amdgpu-pro () {
	pkgdesc="AMD OpenCL ICD Loader library"
	depends=()
	arch=('x86_64')

	rm -Rf "${srcdir}"/libopencl1-amdgpu-pro_16.50-362463_i386
	mkdir "${srcdir}"/libopencl1-amdgpu-pro_16.50-362463_i386
	cd "${srcdir}"/libopencl1-amdgpu-pro_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libopencl1-amdgpu-pro_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi

	provides=(lib32-libcl)
	conflicts=(lib32-libcl)

	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_lib32-libvdpau-amdgpu-pro () {
	pkgdesc="AMDGPU Pro VDPAU driver"
	depends=('lib32-libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'lib32-libdrm2-amdgpu-pro=16.50.362463-1' 'lib32-openssl>=1.0.0' 'lib32-libtinfo>=6' 'lib32-libxcb>=1.8' 'lib32-libxcb' 'lib32-zlib>=1.2.0' 'lib32-libvdpau>=1.1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libvdpau-amdgpu-pro_1:12.0.3-362463_i386
	mkdir "${srcdir}"/libvdpau-amdgpu-pro_1:12.0.3-362463_i386
	cd "${srcdir}"/libvdpau-amdgpu-pro_1:12.0.3-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libvdpau-amdgpu-pro_12.0.3-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_libvdpau-amdgpu-pro () {
	pkgdesc="AMDGPU Pro VDPAU driver"
	depends=('libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'libdrm2-amdgpu-pro=16.50.362463-1' 'openssl>=1.0.0' 'libtinfo>=6' 'libxcb>=1.8' 'libxcb' 'zlib>=1.2.0' 'libvdpau>=1.1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/libvdpau-amdgpu-pro_1:12.0.3-362463_amd64
	mkdir "${srcdir}"/libvdpau-amdgpu-pro_1:12.0.3-362463_amd64
	cd "${srcdir}"/libvdpau-amdgpu-pro_1:12.0.3-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./libvdpau-amdgpu-pro_12.0.3-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-mesa-amdgpu-pro-omx-drivers () {
	pkgdesc="Mesa OpenMAX video drivers"
	depends=('lib32-libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'lib32-libdrm2-amdgpu-pro=16.50.362463-1' 'lib32-libomxil-bellagio0' 'lib32-openssl>=1.0.0' 'lib32-libtinfo>=6' 'lib32-libx11' 'lib32-libxcb>=1.8' 'lib32-libxcb' 'lib32-zlib>=1.2.0')
	arch=('x86_64')

	rm -Rf "${srcdir}"/mesa-amdgpu-pro-omx-drivers_1:12.0.3-362463_i386
	mkdir "${srcdir}"/mesa-amdgpu-pro-omx-drivers_1:12.0.3-362463_i386
	cd "${srcdir}"/mesa-amdgpu-pro-omx-drivers_1:12.0.3-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./mesa-amdgpu-pro-omx-drivers_12.0.3-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_mesa-amdgpu-pro-omx-drivers () {
	pkgdesc="Mesa OpenMAX video drivers"
	depends=('libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'libdrm2-amdgpu-pro=16.50.362463-1' 'libomxil-bellagio0' 'openssl>=1.0.0' 'libtinfo>=6' 'libx11' 'libxcb>=1.8' 'libxcb' 'zlib>=1.2.0')
	arch=('x86_64')

	rm -Rf "${srcdir}"/mesa-amdgpu-pro-omx-drivers_1:12.0.3-362463_amd64
	mkdir "${srcdir}"/mesa-amdgpu-pro-omx-drivers_1:12.0.3-362463_amd64
	cd "${srcdir}"/mesa-amdgpu-pro-omx-drivers_1:12.0.3-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./mesa-amdgpu-pro-omx-drivers_12.0.3-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-opencl-amdgpu-pro-icd () {
	pkgdesc="non-free AMD OpenCL ICD Loaders"
	depends=()
	arch=('x86_64')

	rm -Rf "${srcdir}"/opencl-amdgpu-pro-icd_16.50-362463_i386
	mkdir "${srcdir}"/opencl-amdgpu-pro-icd_16.50-362463_i386
	cd "${srcdir}"/opencl-amdgpu-pro-icd_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./opencl-amdgpu-pro-icd_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_opencl-amdgpu-pro-icd () {
	pkgdesc="non-free AMD OpenCL ICD Loaders"
	depends=()
	arch=('x86_64')

	rm -Rf "${srcdir}"/opencl-amdgpu-pro-icd_16.50-362463_amd64
	mkdir "${srcdir}"/opencl-amdgpu-pro-icd_16.50-362463_amd64
	cd "${srcdir}"/opencl-amdgpu-pro-icd_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./opencl-amdgpu-pro-icd_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_vulkan-amdgpu-pro () {
	pkgdesc="AMDGPU Pro Vulkan driver"
	depends=('libdrm-amdgpu-pro-amdgpu1=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/vulkan-amdgpu-pro_16.50-362463_amd64
	mkdir "${srcdir}"/vulkan-amdgpu-pro_16.50-362463_amd64
	cd "${srcdir}"/vulkan-amdgpu-pro_16.50-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./vulkan-amdgpu-pro_16.50-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-vulkan-amdgpu-pro () {
	pkgdesc="AMDGPU Pro Vulkan driver"
	depends=('lib32-libdrm-amdgpu-pro-amdgpu1=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/vulkan-amdgpu-pro_16.50-362463_i386
	mkdir "${srcdir}"/vulkan-amdgpu-pro_16.50-362463_i386
	cd "${srcdir}"/vulkan-amdgpu-pro_16.50-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./vulkan-amdgpu-pro_16.50-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_lib32-xserver-xorg-video-amdgpu-pro () {
	pkgdesc="X.Org X server -- AMD/ATI Radeon display driver"
	depends=('lib32-libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'lib32-libgbm1-amdgpu-pro=16.50.362463-1' 'lib32-libsystemd>=183')
	arch=('x86_64')

	rm -Rf "${srcdir}"/xserver-xorg-video-amdgpu-pro_1:1.1.99-362463_i386
	mkdir "${srcdir}"/xserver-xorg-video-amdgpu-pro_1:1.1.99-362463_i386
	cd "${srcdir}"/xserver-xorg-video-amdgpu-pro_1:1.1.99-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./xserver-xorg-video-amdgpu-pro_1.1.99-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_xserver-xorg-video-amdgpu-pro () {
	pkgdesc="X.Org X server -- AMD/ATI Radeon display driver"
	depends=('libdrm-amdgpu-pro-amdgpu1=16.50.362463-1' 'libgbm1-amdgpu-pro=16.50.362463-1' 'libsystemd>=183')
	arch=('x86_64')

	rm -Rf "${srcdir}"/xserver-xorg-video-amdgpu-pro_1:1.1.99-362463_amd64
	mkdir "${srcdir}"/xserver-xorg-video-amdgpu-pro_1:1.1.99-362463_amd64
	cd "${srcdir}"/xserver-xorg-video-amdgpu-pro_1:1.1.99-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./xserver-xorg-video-amdgpu-pro_1.1.99-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi

	conflicts=('xf86-video-amdgpu')
	# This is needed because libglx.so has a hardcoded DRI_DRIVER_PATH
	mkdir -p ${pkgdir}/usr/lib/x86_64-linux-gnu
	ln -s /usr/lib/dri ${pkgdir}/usr/lib/x86_64-linux-gnu/dri

}


package_lib32-xserver-xorg-video-glamoregl-amdgpu-pro () {
	pkgdesc="X.Org X server -- graphics acceleration module based on OpenGL"
	depends=('lib32-libdrm2-amdgpu-pro=16.50.362463-1' 'lib32-libepoxy>=1.0' 'lib32-libgbm1-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/xserver-xorg-video-glamoregl-amdgpu-pro_1.18.3-362463_i386
	mkdir "${srcdir}"/xserver-xorg-video-glamoregl-amdgpu-pro_1.18.3-362463_i386
	cd "${srcdir}"/xserver-xorg-video-glamoregl-amdgpu-pro_1.18.3-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./xserver-xorg-video-glamoregl-amdgpu-pro_1.18.3-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_xserver-xorg-video-glamoregl-amdgpu-pro () {
	pkgdesc="X.Org X server -- graphics acceleration module based on OpenGL"
	depends=('libdrm2-amdgpu-pro=16.50.362463-1' 'libepoxy>=1.0' 'libgbm1-amdgpu-pro=16.50.362463-1')
	arch=('x86_64')

	rm -Rf "${srcdir}"/xserver-xorg-video-glamoregl-amdgpu-pro_1.18.3-362463_amd64
	mkdir "${srcdir}"/xserver-xorg-video-glamoregl-amdgpu-pro_1.18.3-362463_amd64
	cd "${srcdir}"/xserver-xorg-video-glamoregl-amdgpu-pro_1.18.3-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./xserver-xorg-video-glamoregl-amdgpu-pro_1.18.3-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}


package_lib32-xserver-xorg-video-modesetting-amdgpu-pro () {
	pkgdesc="XServer modules for amdgpu-pro This package contains modesetting_drv.so"
	depends=('lib32-libsystemd>=183')
	arch=('x86_64')

	rm -Rf "${srcdir}"/xserver-xorg-video-modesetting-amdgpu-pro_1.18.3-362463_i386
	mkdir "${srcdir}"/xserver-xorg-video-modesetting-amdgpu-pro_1.18.3-362463_i386
	cd "${srcdir}"/xserver-xorg-video-modesetting-amdgpu-pro_1.18.3-362463_i386
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./xserver-xorg-video-modesetting-amdgpu-pro_1.18.3-362463_i386.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/i386-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib32
		mv "${pkgdir}"/usr/lib/i386-linux-gnu/* "${pkgdir}"/usr/lib32
		rmdir "${pkgdir}"/usr/lib/i386-linux-gnu
	fi
	rm -Rf ${pkgdir}/usr/share/doc ${pkgdir}/usr/include
}


package_xserver-xorg-video-modesetting-amdgpu-pro () {
	pkgdesc="XServer modules for amdgpu-pro This package contains modesetting_drv.so"
	depends=('libsystemd>=183')
	arch=('x86_64')

	rm -Rf "${srcdir}"/xserver-xorg-video-modesetting-amdgpu-pro_1.18.3-362463_amd64
	mkdir "${srcdir}"/xserver-xorg-video-modesetting-amdgpu-pro_1.18.3-362463_amd64
	cd "${srcdir}"/xserver-xorg-video-modesetting-amdgpu-pro_1.18.3-362463_amd64
	ar x "${srcdir}"/amdgpu-pro-16.50-362463/./xserver-xorg-video-modesetting-amdgpu-pro_1.18.3-362463_amd64.deb
	tar -C "${pkgdir}" -xf data.tar.xz

	if [ -d "${pkgdir}/usr/lib/x86_64-linux-gnu" ]; then
		mkdir -p "${pkgdir}"/usr/lib
		mv "${pkgdir}"/usr/lib/x86_64-linux-gnu/* "${pkgdir}"/usr/lib
		rmdir "${pkgdir}"/usr/lib/x86_64-linux-gnu
	fi
}

